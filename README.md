# 江南听雨研发中心规章制度

## 前言

为了组织健康可持续发展, 有必要对现行的一些做法和措施进行规范化, 以降低培训成本和为新手入门把握方向.

这里描述的规则是为**规则**, 除非明确注明, 否则不允许违反.


## 违规行为处理

* TODO


## 开发部分

### 开发环境规范

* 除某些受限制项目可以且必须使用 Windows (例如 Windows 8 应用开发), **必须使用 Linux 或 Mac OS X 等类 Unix 内核操作系统**
* TODO


### 代码风格规范

#### 通用规范

* **文件名** 一般**不允许使用汉字**; 任何情况下**严禁使用带空格的文件名和目录名**
* **文件编码** 除非必须使用其他编码之外, **一律 UTF-8**
* **行尾** 除非使用 LF 行尾会导致出错而必须使用 DOS (CRLF) 行尾, **一律 Unix (LF) 行尾**
* **自然语言** 除非在注释中或者用户界面中, **不允许使用汉语或汉语拼音**
* **标点符号** 一律使用半角标点 (`, . : ;` 等). 除非必须使用 (如作为字符串常量), **不得出现全角符号** (`，。：；` 等). 标点符号后一般要有半角空格, 不过当然不要违反下一条规则
* **空白** 除非特别说明, **使用空格缩进**, 缩进量在下面分语言定义. **严禁在一行末尾保留多余的空格**
* *TODO*


#### Git 版本库

* 必须有合适的 `.gitignore` 文件
* 必须有 `README`, 但标记语言不设限制, 一般使用 Markdown
* *TODO: README 内容格式*
* 所有非合并提交必须有提交说明, 语言可选汉语或英语, 但不要单纯为了用英语而用出错误的英语
* 除非是小项目 (TODO: 明确概念), 必须使用 git-flow 流程开发. `git flow init` 时的设置如下:
    * 开发分支一律命名为 `master`
    * 稳定分支一律命名为 `stable`
    * 其他所有分支前缀和 tag 前缀设置不变


#### Python

* 4 空格缩进
* *TODO*


#### Markdown

*TODO*


#### HTML

*TODO*


#### JS

*TODO*


#### CSS/Sass

*TODO*


#### Java

*TODO*


#### Objective-C/C++

*TODO*


### 协作流程规范

*TODO*


## 运维部分

### 系统软件升级操作规程

* 周期: 最少一学年一次, 最多一个月一次
* 流程
    * 在 issue-tracker 开 issue, 标题格式为 `[运维] yyyy-mm 系统升级`, 其中 `yyyy-mm` 为四位数年份与两位数月份, 如: `[运维] 2014-03 系统升级`
    * 在开发用 LXC 容器上先行测试
        - `eix-sync` 同步 Portage 树
        - `emerge -pvuDN @world` 观察升级情况
        - 根据需要调整 `package.accept_keywords` 和 `package.use` 目录下的设置
        - `emerge -uDN @world`. 如有 gcc 或 glibc 升级, 则先 `emerge -1` 相应的包, 再 emerge world.
        - 找时间重启, 检验各服务运行情况
        - 确定一切正常后, 更新所有容器的 Portage 配置到一致
    * 对不能保证 0 下线时间的服务 (KBS, BT 站) 划定维护时间窗口, 应该和相关站点管理人员沟通好维护时间. 始终应该考虑到升级失败的可能性并留出检修故障的时间.
    * TODO


### 系统内核升级操作规程

* 周期: 最少一学年一次, 最多一个月一次, 有重大安全漏洞或数据损失 bug 的情况下除外
* 流程
    * TODO


### 突发运维事故处理流程


## 组织管理部分

### GitHub 组织管理

*TODO*


### 行政管理

*TODO*


<!-- vim:set ai et ts=4 sw=4 sts=4 fenc=utf-8: -->
